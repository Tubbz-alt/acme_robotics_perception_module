<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>Acme Robotics: Perception Module: Perception Module for Unmanned Aerial Vehicle</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Acme Robotics: Perception Module
   &#160;<span id="projectnumber">1.0</span>
   </div>
   <div id="projectbrief">Midterm project for ENPM808X at UMD</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md__home_nrparikh_Desktop_acme_robotics_perception_module_readme.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Perception Module for Unmanned Aerial Vehicle </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/nr-parikh/acme_robotics_perception_module"></a> <a href="https://coveralls.io/github/nr-parikh/acme_robotics_perception_module?branch=master"></a> <a href="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/LICENSE"></a></p>
<h2>Overview</h2>
<p>This is a naive perception module for the Unmanned Aerial Vehicle by Acme Robotics. The new robot being developed by Acme robotics has a downward facing camera and a front facing ultrasonic sensor. The task of the robot is to detect the boundary lines which might be there on the ground and head in the direction opposite to that of the boundary lines. It should simultaneously also monitor the incoming reading from the ultrasonic sensor and avoid obstacles if any. The developed perception module has the capability of combining the information from different sensors and decide the heading direction. The details about the module are discussed in detail here.</p>
<p>The dependencies of the module are:</p><ul>
<li>OpenCV 3.2 or higher: To download and build the library, please follow the instructions given <a href="https://www.learnopencv.com/install-opencv3-on-ubuntu/">here</a>.</li>
</ul>
<h2>Instructions to build the module</h2>
<p>Before building the module, please ensure that the dependencies are met. Please follow the instructions given below to build the module.</p>
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ git clone https://github.com/nr-parikh/acme_robotics_perception_module.git</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ cd &lt;path to repository&gt;</div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;$ mkdir build</div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;$ cd build</div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;$ cmake ..</div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;$ make</div></div><!-- fragment --><p>Once the module is built correctly, to run the executable type the following command: </p><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;$ cd &lt;build folder of the module&gt;</div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;$ ./perception_module/shell-app</div></div><!-- fragment --><h2>Solo Iterative Process</h2>
<p>While developing this module SIP process was followed. The link to the SIP sheet for this module is <a href="https://docs.google.com/spreadsheets/d/1xeEtkg9tZwtrnPBAMPW0ByWKBNMoUEidjYDhUrIFllk/edit?usp=sharing">here</a>. Please note that the legend of the code is mentioned in the sheet itself.</p>
<p>Release backlog shows the improvements in the expected time to complete a certain task as the module is developed. The task backlog given detailed breakdown of time taken for each individual tasks.</p>
<h2>Sensors</h2>
<p>This module relies on the information incoming from two different sensors. The sensors which it uses are:</p><ul>
<li>RGB camera</li>
<li>Ultrasonic <a class="el" href="class_sensor.html" title="Class for generic sensor. Particular sensor in the system will inherit this base class. ">Sensor</a></li>
</ul>
<p>The camera is downward facing. The position of the camera is such that it becomes easier for it to get the information of the things on the ground. The module creates a camera object which uses OpenCV's <em>VideoCapture</em> oject to reda frames of the incoming video stream. If there is a need for debugging, the camera has debugging mode. A flag can be used to toggle the debug mode. In the debug mode, the camera reads a default image provided in the <em>data</em> folder. The camera module has <em>is_running_</em> flag which indicates whether the camera is running or not.</p>
<p>Ultrasonic sensor is front facing. The location is such that it can detect the obstacles in the front of the robot. In this module the readings from the sensor are simulated using pseudo-random number generator. But the logic is treats it as sensor readings and not as random numbers. The ultrasonic sensor also has <em>is_running_</em> flag which indicates whether the sensor is running or not.</p>
<h2>Algorithm</h2>
<p>The task at hand for robot is to be within the boundary it sees on the ground while avoiding the obstacles it sees in front of it. The main task for the perception module is to detect the caution tape in the image. To detect the tape a particular feature of the caution tape, the fact that it is yello and black, is used. Since, the colors of the tape are already known it becomes easier to detect the tape. <em><a class="el" href="class_camera.html" title="Class for camera sensor. This class is derived from the base Class Sensor. ">Camera</a></em> module pre-processes the image. Pre-processing includes finding the <em>inRange</em> pixels i.e. find the pixels which are within the range of <em>yellow</em> and <em>black</em> colors. Adding the two images will give the <em>blob</em> of tape in the image. The <em>perception</em> module then uses this pre-processed image as an input to determine the location of the tape in it. To locate the line in the given module has 2 methods:</p>
<ul>
<li>First is to <em>Hough transforms</em> to find the lines. OpenCV's <em>Houghlines</em> function finds the possible lines in the image and sorts them according the number of votes. The highest voted line is the first element of the vector which can be used to find the points on that line.</li>
<li>Second method is to find the largest closed contour in the image which is probably the tape. To detect the largest contour, the simplest way is to iterate over all possible closed contours and find the largest contour based on its area. The center of the largest contour can then be found to decide the heading direction.</li>
</ul>
<p>Based on the method used to find the location of the tape, <em>control</em> module has different methods to compute control action. For the first method described above, the location of both the points can be used to determine whether the line is horizontal or vertical and then check if the points are located in which quadrant of the image. The angle of heading can also be calculated from the <em>slope</em> of the line. For the second method, the location of the center can be used to approximately determine the quadrant in which the line lies. This method is not good since it can locate the tape approximately. Hence, the usage of the first method is suggested and is set as default.</p>
<p>The <em>control</em> module first checks the reading from the ultrasonic sensor to determine whether any obstacle is present in front of the robot or not. If it finds an obstacle it issues the command to <em>go back</em>. If no obstacles are found then it detects the tape in the image. It then locates the points and based on the location of points it generates the control action.</p>
<h2>Output</h2>
<p>The following table shows the output for the vertically detected line in the image.</p>
<table class="doxtable">
<tr>
<th>Input Image </th><th>Pre-processed output  </th></tr>
<tr>
<td><div class="image">
<img src="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/data/caution_tape_vertical.jpg"  width="405"/>
</div>
 </td><td><div class="image">
<img src="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/data/expectedImg.jpg"  width="405"/>
</div>
 </td></tr>
</table>
<table class="doxtable">
<tr>
<th>Detected Line </th><th>Generated output action  </th></tr>
<tr>
<td><div class="image">
<img src="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/data/outputImg.jpg"  width="405"/>
</div>
 </td><td><div class="image">
<img src="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/data/output_1.png"  width="405"/>
</div>
 </td></tr>
</table>
<p>The table below shows the output for the horizontally detected line in the image.</p>
<table class="doxtable">
<tr>
<th>Input Image </th><th>Pre-processed output  </th></tr>
<tr>
<td><div class="image">
<img src="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/data/caution_tape.jpg"  width="405"/>
</div>
 </td><td><div class="image">
<img src="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/data/expectedImg2.jpg"  width="405"/>
</div>
 </td></tr>
</table>
<table class="doxtable">
<tr>
<th>Detected Line </th><th>Generated output action  </th></tr>
<tr>
<td><div class="image">
<img src="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/data/pre-process_2.jpg"  width="405"/>
</div>
 </td><td><div class="image">
<img src="https://github.com/nr-parikh/acme_robotics_perception_module/blob/master/data/output_2.png"  width="405"/>
</div>
 </td></tr>
</table>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.11 </li>
  </ul>
</div>
</body>
</html>
